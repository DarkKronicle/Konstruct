plugins {
    id 'java'
    id "io.freefair.lombok" version "6.0.0-m2"
    id 'maven-publish'
}

repositories {
    mavenCentral()
}

configure(subprojects.findAll {it.name != "examples"}) {

    apply plugin: 'java'
    apply plugin: "io.freefair.lombok"
    apply plugin: 'maven-publish'

    version = "${project.version}"
    group project.maven_group
    sourceCompatibility = JavaVersion.VERSION_16
    archivesBaseName = project.archivesBaseName

    repositories {
        mavenCentral()
    }

    task sourcesJar(type: Jar) {
        archiveClassifier = 'sources'
        from sourceSets.main.java.srcDirs
    }

    dependencies {

    }

    test {

    }

    jar {
        from("LICENSE.txt") {
            rename { "${it}_${project.archivesBaseName}" }
        }
    }


    afterEvaluate {
        publishing {
            publications {
                release(MavenPublication) {
                    from components.release

                    groupId = 'io.github.darkkronicle.Konstruct'
                    artifactId = 'Konstruct'
                    version = project.version
                }
            }
        }
    }

}